<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>تقديم صانع محتوى</title>
<link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700;800&display=swap" rel="stylesheet">
<style>
  :root{
    --bg:#f7f8fc; --card:#ffffff; --muted:#5b6477; --text:#1b2333;
    --accent:#C99A00; --ok:#178f5a; --danger:#c73737;
    --input:#f2f4fb; --ring:#d7dced;
  }
  *{box-sizing:border-box}
  html,body{height:100%}
  body{
    margin:0; background:var(--bg);
    font-family:'Cairo',system-ui,-apple-system,Segoe UI,Roboto,Arial;
    color:var(--text); line-height:1.7;
    display:flex; justify-content:center; padding:20px;
  }
  .wrap{width:100%; max-width:980px}

  /* ===== Banner (نسخة خفيفة ومتجاوبة) ===== */
  .banner{
    position:relative; width:100%; height:220px; overflow:hidden;
    border:2px solid var(--ring); border-radius:16px; margin-bottom:18px;
    background: radial-gradient(1000px 220px at 20% 50%, rgba(50,225,255,.18), transparent 60%), linear-gradient(90deg,#eaeaff,#ffe9b5);
    box-shadow:0 6px 22px rgba(0,0,0,.06);
    display:grid; grid-template-columns: 160px 1fr 240px; align-items:center; padding:12px;
  }
  .cta{display:flex; justify-content:center}
  .cta a{
    display:inline-block; background:linear-gradient(180deg,#32e1ff,#12c2e9);
    color:#0f0f15; font-weight:800; font-size:18px; text-decoration:none;
    padding:10px 16px; border-radius:12px; border:1px solid rgba(0,0,0,.15);
  }
  .btext{text-align:center}
  .btext h1{margin:0 0 6px; font-size:26px}
  .btext p{margin:0; color:#3b435a}
  .mascot{display:flex; justify-content:center}
  .mascot svg{height:170px; width:auto; filter:drop-shadow(0 6px 10px rgba(0,0,0,.15))}
  @media (max-width:820px){
    .banner{grid-template-columns:1fr; height:auto; row-gap:10px; padding:14px}
    .mascot{display:none}
  }

  /* ===== Card / Form ===== */
  .card{
    background:var(--card); border:1px solid var(--ring); border-radius:16px; padding:20px;
    box-shadow:0 8px 28px rgba(16,24,40,.06);
  }
  h2{
    margin:6px 0 12px; font-size:26px;
    background:linear-gradient(90deg,var(--accent), #FFD54A 35%, #B8860B);
    -webkit-background-clip:text; background-clip:text; color:transparent;
    text-align:center;
  }
  .desc{color:var(--muted); margin-bottom:16px; text-align:center}
  .actions{display:flex; justify-content:center; gap:12px; flex-wrap:wrap; margin-bottom:18px}
  .btn{
    border:none; cursor:pointer; border-radius:12px; padding:10px 16px; font-weight:700;
    background:linear-gradient(135deg,#FFD54A,#E6B800); color:#2a2200; box-shadow:0 6px 18px rgba(255,213,74,.25);
  }

  form{display:grid; gap:14px; scroll-margin-top:90px}
  .grid{display:grid; gap:12px}
  @media(min-width:720px){ .grid.cols-2{grid-template-columns:1fr 1fr} }
  label{display:block; font-weight:700; margin-bottom:6px}
  .field{
    background:var(--input); border:1px solid var(--ring); border-radius:12px; padding:12px 14px;
    color:var(--text); width:100%; font-size:16px;
  }
  select.field{padding-right:12px}
  .row{display:flex; gap:10px; align-items:center}
  .prefix{
    background:#fff; border:1px solid var(--ring); color:#343c4f; padding:12px 14px; border-radius:12px; min-width:88px; text-align:center; font-size:15px;
  }
  .hint{color:var(--muted); font-size:12px; margin-top:6px}
  .chips{display:flex; flex-wrap:wrap; gap:8px}
  .chip{display:inline-flex; align-items:center; gap:8px; padding:8px 12px; border-radius:999px; background:#f4f6ff; border:1px solid var(--ring); cursor:pointer; user-select:none}
  .chip input{accent-color:#E6B800; transform:scale(1.1)}
  .divider{height:1px; background:var(--ring); margin:4px 0 8px}
  .hidden{display:none !important}
  .footer{display:flex; gap:12px; margin-top:8px; flex-wrap:wrap}
  .footer .btn{min-width:160px}
  .msg{padding:10px 12px; border-radius:10px; font-weight:700}
  .ok{background:#e9f8f1; color:#055a38; border:1px solid #bdebd3}
  .err{background:#fdecec; color:#7a1d1d; border:1px solid #f3bcbc}
</style>
</head>
<body>
  <div class="wrap">

    <!-- ===== البنر المتجاوب ===== -->
    <div class="banner">
      <div class="cta"><a href="#creatorForm">قدّم الآن</a></div>
      <div class="btext">
        <h1>✨ تقديم صانع محتوى</h1>
        <p>اعرض موهبتك، وقدّم سيرتك وأعمالك للانضمام إلينا.</p>
      </div>
      <div class="mascot" aria-hidden="true">
        <svg viewBox="0 0 230 220" xmlns="http://www.w3.org/2000/svg">
          <ellipse cx="120" cy="205" rx="65" ry="10" fill="rgba(0,0,0,.12)"/>
          <path d="M60 170 Q60 130 90 120 L150 120 Q180 130 180 170 L180 185 Q180 195 170 198 L70 198 Q60 195 60 185 Z"
                fill="#1cc8e5" stroke="#0eaec8" stroke-width="2"/>
          <path d="M150 130 Q165 138 175 160"
                fill="none" stroke="#0eaec8" stroke-width="10" stroke-linecap="round"/>
          <g transform="translate(172,156)">
            <rect x="-4" y="-4" width="18" height="34" rx="6" fill="#1e1e2b"/>
            <rect x="-1" y="-1" width="12" height="14" rx="4" fill="#444a65"/>
            <rect x="-1" y="14" width="12" height="6" rx="2" fill="#2e334a"/>
          </g>
          <circle cx="120" cy="90" r="34" fill="#ffdfc9" stroke="#e0b9a4" stroke-width="2"/>
          <path d="M86 90 Q90 58 120 56 Q150 58 154 90 Q150 78 140 72 Q130 66 120 66 Q110 66 100 72 Q90 78 86 90Z"
                fill="#2b2b40"/>
          <rect x="80" y="84" width="12" height="20" rx="6" fill="#2b2b40"/>
          <rect x="148" y="84" width="12" height="20" rx="6" fill="#2b2b40"/>
          <path d="M92 78 Q120 70 148 78" fill="none" stroke="#2b2b40" stroke-width="8" stroke-linecap="round"/>
          <circle cx="108" cy="92" r="3.2" fill="#1a1a1a"/>
          <circle cx="132" cy="92" r="3.2" fill="#1a1a1a"/>
          <path d="M108 104 Q120 112 132 104" fill="none" stroke="#c25b7a" stroke-width="3" stroke-linecap="round"/>
        </svg>
      </div>
    </div>

    <!-- ===== الاستبيان ===== -->
    <div class="card">
      <h2>نموذج تقديم صانع محتوى</h2>
      <p class="desc">املأ البيانات، وسيتم إرسالها مباشرة إلى Google Sheets.</p>

      <div class="actions">
        <button type="button" id="guideBtn" class="btn">📘 دليل صانع المحتوى</button>
      </div>

      <form id="creatorForm" novalidate>
        <div class="grid cols-2">
          <div>
            <label for="name">الاسم الكامل *</label>
            <input class="field" id="name" type="text" required />
          </div>
          <div>
            <label for="gender">الجنس *</label>
            <select class="field" id="gender" required>
              <option value="" selected disabled>اختر</option>
              <option>ذكر</option>
              <option>أنثى</option>
              <option>آخر</option>
            </select>
          </div>
        </div>

        <div class="grid cols-2">
          <div>
            <label for="country">الدولة *</label>
            <select class="field" id="country" required>
              <option value="" selected disabled>اختر دولتك</option>
              <option value="EG">مصر</option>
              <option value="SA">السعودية</option>
              <option value="AE">الإمارات</option>
              <option value="KW">الكويت</option>
              <option value="QA">قطر</option>
              <option value="BH">البحرين</option>
              <option value="OM">عُمان</option>
              <option value="YE">اليمن</option>
              <option value="JO">الأردن</option>
              <option value="LB">لبنان</option>
              <option value="SY">سوريا</option>
              <option value="IQ">العراق</option>
              <option value="PS">فلسطين</option>
              <option value="IL">إسرائيل</option>
              <option value="TR">تركيا</option>
              <option value="IR">إيران</option>
              <option value="SD">السودان</option>
              <option value="LY">ليبيا</option>
            </select>
            <div class="hint">مقدّمة الواتساب تتغيّر تلقائيًا حسب الدولة.</div>
          </div>

          <div>
            <label for="likee">Likee ID</label>
            <input class="field" id="likee" type="text" placeholder="إن وجد" />
          </div>
        </div>

        <div>
          <label>رقم الواتساب *</label>
          <div class="row">
            <div class="prefix" id="dialPrefix">+20</div>
            <input class="field" id="whats" type="tel" inputmode="numeric" placeholder="اكتب رقمك بدون المقدمة" required pattern="^[0-9]{6,15}$" />
          </div>
          <div class="hint">مثال: 10XXXXXXXX — بدون رمز الدولة.</div>
        </div>

        <div>
          <label>هل لديك موهبة؟ *</label>
          <div class="chips" role="radiogroup">
            <label class="chip"><input type="radio" name="hasTalent" value="نعم" required> نعم</label>
            <label class="chip"><input type="radio" name="hasTalent" value="لا" required> لا</label>
          </div>
        </div>

        <div id="talentBox" class="hidden">
          <label class="section-title">ما هي الموهبة التي تقدمها؟</label>
          <div class="chips">
            <label class="chip"><input type="checkbox" name="talents" value="رسم"> رسم</label>
            <label class="chip"><input type="checkbox" name="talents" value="عزف"> عزف</label>
            <label class="chip"><input type="checkbox" name="talents" value="غناء"> غناء</label>
            <label class="chip"><input type="checkbox" name="talents" value="تقليد أصوات"> تقليد أصوات</label>
            <label class="chip"><input type="checkbox" name="talents" value="شعر"> شعر</label>
            <label class="chip"><input type="checkbox" name="talents" value="تمثيل"> تمثيل</label>
            <label class="chip"><input type="checkbox" name="talents" value="رقص"> رقص</label>
            <label class="chip"><input type="checkbox" name="talents" value="أعمال يدوية"> أعمال يدوية</label>
            <label class="chip"><input type="checkbox" name="talents" value="طبخ"> طبخ</label>
            <label class="chip"><input type="checkbox" name="talents" value="أخرى" id="talentOtherChk"> أخرى</label>
          </div>
          <div id="talentOtherWrap" class="hidden" style="margin-top:10px">
            <input class="field" id="talentOther" type="text" placeholder="اكتب موهبتك الأخرى" />
          </div>
        </div>

        <div class="divider"></div>

        <div>
          <label>هل عملت على أي منصة أخرى؟ *</label>
          <div class="chips" role="radiogroup">
            <label class="chip"><input type="radio" name="workedBefore" value="نعم" required> نعم</label>
            <label class="chip"><input type="radio" name="workedBefore" value="لا" required> لا</label>
          </div>
        </div>

        <div id="platformNameWrap" class="hidden">
          <label for="platformName">اسم المنصة التي عملت عليها من قبل</label>
          <input class="field" id="platformName" type="text" placeholder="TikTok, Likee, YouTube..." />
        </div>

        <div>
          <label>هل لديك أكثر من 10K متابع؟ *</label>
          <div class="chips" role="radiogroup">
            <label class="chip"><input type="radio" name="gt10k" value="نعم" required> نعم</label>
            <label class="chip"><input type="radio" name="gt10k" value="لا" required> لا</label>
          </div>
        </div>

        <div>
          <label for="invite">كود الدعوة</label>
          <input class="field" id="invite" type="text" placeholder="إن وجد" />
        </div>

        <div class="footer">
          <button type="submit" class="btn">إرسال الاستبيان</button>
          <button type="reset" class="btn" style="background:#eaeefb">تفريغ الحقول</button>
          <span id="formMsg" class="msg hidden"></span>
        </div>
      </form>
    </div>
  </div>

<script>
  // == روابط
  const GUIDE_URL  = "https://a7medras.github.io/broadcaster-guide/";
  const SCRIPT_URL = "https://script.google.com/macros/s/AKfycbwTcjv4xTYC3ZGIYmveXHa8n0UQpFMIK_TRncQfbRhPedSrLV4UiQu2qQkWDIy2kjofTA/exec";

  document.getElementById('guideBtn').addEventListener('click', () => {
    window.open(GUIDE_URL, "_blank", "noopener");
  });

  // == مقدّمة الواتساب حسب الدولة (يعتمد على كود الدولة في option.value)
  const dialByCountry = {
    EG:"+20", SA:"+966", AE:"+971", KW:"+965", QA:"+974", BH:"+973", OM:"+968",
    YE:"+967", JO:"+962", LB:"+961", SY:"+963", IQ:"+964", PS:"+970", IL:"+972",
    TR:"+90", IR:"+98", SD:"+249", LY:"+218"
  };
  const countrySel = document.getElementById('country');
  const dialPrefix = document.getElementById('dialPrefix');
  const whats = document.getElementById('whats');

  countrySel.addEventListener('change', () => {
    const code = dialByCountry[countrySel.value] || "+";
    dialPrefix.textContent = code;
    whats.focus();
  });

  // == منطق المواهب
  const talentBox = document.getElementById('talentBox');
  const talentOtherChk = document.getElementById('talentOtherChk');
  const talentOtherWrap = document.getElementById('talentOtherWrap');
  const talentOther = document.getElementById('talentOther');

  document.querySelectorAll('input[name="hasTalent"]').forEach(r => {
    r.addEventListener('change', () => {
      const show = r.value === 'نعم' && r.checked;
      talentBox.classList.toggle('hidden', !show);
      if (!show) {
        document.querySelectorAll('input[name="talents"]').forEach(c => c.checked = false);
        talentOtherWrap.classList.add('hidden'); talentOther.value = "";
      }
    });
  });

  document.querySelectorAll('input[name="talents"]').forEach(c => {
    c.addEventListener('change', () => {
      const otherChecked = talentOtherChk.checked;
      talentOtherWrap.classList.toggle('hidden', !otherChecked);
      if (!otherChecked) talentOther.value = "";
      if (otherChecked) talentOther.focus();
    });
  });

  // == المنصات السابقة
  const platformWrap = document.getElementById('platformNameWrap');
  document.querySelectorAll('input[name="workedBefore"]').forEach(r => {
    r.addEventListener('change', () => {
      const show = r.value === 'نعم' && r.checked;
      platformWrap.classList.toggle('hidden', !show);
      if (!show) document.getElementById('platformName').value = "";
    });
  });

  // == الإرسال إلى Google Sheets
  const form = document.getElementById('creatorForm');
  const formMsg = document.getElementById('formMsg');

  form.addEventListener('submit', async (e) => {
    e.preventDefault();
    formMsg.classList.add('hidden');

    if (!form.checkValidity()) {
      formMsg.textContent = "تحقق من الحقول المطلوبة";
      formMsg.className = "msg err";
      formMsg.classList.remove('hidden');
      return;
    }

    // اسم الدولة كنص (من option.text) + كودها للواتساب
    const countryText = countrySel.options[countrySel.selectedIndex]?.text || "";

    const data = {
      name: document.getElementById('name').value.trim(),
      gender: document.getElementById('gender').value,
      country: countryText,
      countryCode: dialPrefix.textContent,
      whatsapp: whats.value.trim(),
      likee: document.getElementById('likee').value.trim(),
      hasTalent: (document.querySelector('input[name="hasTalent"]:checked')||{}).value || "",
      talents: Array.from(document.querySelectorAll('input[name="talents"]:checked')).map(i=>i.value),
      talentOther: (document.getElementById('talentOther')||{}).value || "",
      workedBefore: (document.querySelector('input[name="workedBefore"]:checked')||{}).value || "",
      platformName: (document.getElementById('platformName')||{}).value || "",
      gt10k: (document.querySelector('input[name="gt10k"]:checked')||{}).value || "",
      invite: (document.getElementById('invite')||{}).value || "",
      submittedAt: new Date().toISOString()
    };

    const submitBtn = form.querySelector('button[type="submit"]');
    submitBtn.disabled = true;

    try {
      await fetch(SCRIPT_URL, {
        method: "POST",
        mode: "no-cors",                 // تشغيل من GitHub Pages بدون CORS
        headers: {"Content-Type":"application/json"},
        body: JSON.stringify(data)
      });

      // no-cors → مش هنقرأ الرد، نعرض نجاح افتراضي
      formMsg.textContent = "تم إرسال الاستبيان بنجاح ✅";
      formMsg.className = "msg ok";
      formMsg.classList.remove('hidden');

      form.reset();
      dialPrefix.textContent = "+20";
      talentBox.classList.add('hidden');
      talentOtherWrap.classList.add('hidden');
      platformWrap.classList.add('hidden');
    } catch (err) {
      console.error(err);
      formMsg.textContent = "حصل خطأ أثناء الإرسال ❌";
      formMsg.className = "msg err";
      formMsg.classList.remove('hidden');
    } finally {
      submitBtn.disabled = false;
    }
  });

  form.addEventListener('reset', () => {
    setTimeout(()=>{
      formMsg.classList.add('hidden');
      dialPrefix.textContent = "+20";
      talentBox.classList.add('hidden');
      talentOtherWrap.classList.add('hidden');
      platformWrap.classList.add('hidden');
    }, 0);
  });
</script>
</body>
</html>
